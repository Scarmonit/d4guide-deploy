---
layout: base.njk
title: Depths of Darkness - A Diablo-Inspired RPG
description: A dark dungeon-crawling RPG inspired by classic Diablo
styles:
  - /game/css/game.css
---

<!-- Game Container -->
<div id="loading">
    <div class="loading-content">
        <h2 class="loading-title">DEPTHS OF DARKNESS</h2>
        <div class="loading-bar">
            <div class="loading-fill" id="loading-fill"></div>
        </div>
        <p class="loading-text">Descending into darkness...</p>
        <p class="loading-tip" id="loading-tip">Tip: Press Q for health potions, W for mana potions</p>
    </div>
</div>

<!-- Floor Transition Overlay -->
<div id="floor-transition" class="floor-transition hidden">
    <div class="floor-transition-content">
        <h2 class="floor-transition-title" id="floor-transition-title">Cathedral</h2>
        <p class="floor-transition-floor" id="floor-transition-floor">Floor 1</p>
        <div class="floor-transition-bar">
            <div class="floor-transition-fill"></div>
        </div>
    </div>
</div>

<div id="game-container">
    <!-- Main Canvas -->
    <canvas id="game-canvas"></canvas>

    <!-- HUD Overlay -->
    <div id="hud" style="display: none;">
        <!-- Floor Display -->
        <div id="floor-display">Cathedral - Floor 1</div>

        <!-- Audio Controls -->
        <div id="audio-controls">
            <button id="mute-btn" title="Toggle Sound (M)">
                <span id="mute-icon">&#128266;</span>
            </button>
        </div>

        <!-- Character Info -->
        <div id="char-info"></div>

        <!-- Gold Display -->
        <div id="gold-container">
            <span class="gold-icon">ðŸ’°</span>
            <span id="gold-display">0</span>
        </div>

        <!-- XP Bar -->
        <div id="xp-bar-container">
            <div id="xp-bar">
                <div id="xp-fill"></div>
            </div>
            <span id="xp-text">0 / 100 XP</span>
        </div>

        <!-- Health Orb -->
        <div class="orb-container" id="health-orb" title="Health - Press Q for potion">
            <div class="orb">
                <div class="orb-fill" id="health-fill"></div>
                <span class="orb-text">100</span>
            </div>
            <span class="orb-label">HP</span>
            <div class="potion-count health-potion-count" id="health-potion-count" title="Health Potions (Q)">
                <span class="potion-icon">ðŸ§ª</span>
                <span class="potion-num">0</span>
            </div>
        </div>

        <!-- Mana Orb -->
        <div class="orb-container" id="mana-orb" title="Mana - Press W for potion">
            <div class="orb">
                <div class="orb-fill" id="mana-fill"></div>
                <span class="orb-text">20</span>
            </div>
            <span class="orb-label">MP</span>
            <div class="potion-count mana-potion-count" id="mana-potion-count" title="Mana Potions (W)">
                <span class="potion-icon">ðŸ§ª</span>
                <span class="potion-num">0</span>
            </div>
        </div>

        <!-- Minimap (placeholder for future) -->
        <div id="minimap" style="display: none;"></div>
    </div>

    <!-- Full Map Overlay -->
    <div id="fullmap-overlay" class="fullmap-overlay hidden">
        <div class="fullmap-container">
            <div class="fullmap-header">
                <h2>World Map</h2>
                <span class="fullmap-hint">Press M or ESC to close</span>
                <div class="fullmap-controls">
                    <button class="fullmap-btn" id="fullmap-zoom-in" title="Zoom In">+</button>
                    <button class="fullmap-btn" id="fullmap-zoom-out" title="Zoom Out">âˆ’</button>
                    <button class="fullmap-btn" id="fullmap-center" title="Center on Player">âŒ–</button>
                    <button class="fullmap-btn" id="fullmap-close" title="Close Map">âœ•</button>
                </div>
            </div>
            <div class="fullmap-content">
                <canvas id="fullmap-canvas" class="fullmap-canvas" width="600" height="450"></canvas>
            </div>
            <div class="fullmap-legend">
                <span class="legend-item"><span class="legend-color" style="background: #44ff44;"></span> You</span>
                <span class="legend-item"><span class="legend-color" style="background: #ff4444;"></span> Enemy</span>
                <span class="legend-item"><span class="legend-color" style="background: #ffcc00;"></span> Stairs</span>
                <span class="legend-item"><span class="legend-color" style="background: #4488ff;"></span> Portal</span>
            </div>
            <div class="fullmap-info">
                Scroll to zoom â€¢ Drag to pan
            </div>
        </div>
    </div>

    <!-- Death Screen Overlay -->
    <div id="death-overlay" class="death-overlay hidden">
        <div class="death-content">
            <h1 class="death-title">YOU HAVE DIED</h1>
            <p class="death-message">Your soul fades into the darkness...</p>
            <div class="death-recap" id="death-recap">
                <p class="death-cause">Slain by <span id="death-killer">Unknown</span></p>
            </div>
            <div class="death-stats">
                <div class="death-stat-row">
                    <span class="stat-label">Floor Reached</span>
                    <span class="stat-value" id="death-floor">1</span>
                </div>
                <div class="death-stat-row">
                    <span class="stat-label">Enemies Slain</span>
                    <span class="stat-value" id="death-kills">0</span>
                </div>
                <div class="death-stat-row">
                    <span class="stat-label">Gold Collected</span>
                    <span class="stat-value" id="death-gold">0</span>
                </div>
                <div class="death-stat-row">
                    <span class="stat-label">XP Earned</span>
                    <span class="stat-value" id="death-xp">0</span>
                </div>
                <div class="death-stat-row">
                    <span class="stat-label">Session Time</span>
                    <span class="stat-value" id="death-time">0:00</span>
                </div>
                <div class="death-stat-row">
                    <span class="stat-label">Best Kill Streak</span>
                    <span class="stat-value" id="death-streak">0</span>
                </div>
            </div>
            <button class="death-button" id="death-respawn-btn">Return to Town</button>
            <button class="death-button secondary" id="death-menu-btn">Main Menu</button>
        </div>
    </div>

    <!-- Main Menu -->
    <div id="main-menu">
        <h1>DEPTHS OF DARKNESS</h1>

        <button class="menu-button" id="new-game-btn">New Game</button>
        <button class="menu-button" id="continue-btn">Continue</button>
        <button class="menu-button" id="settings-btn">Settings</button>
        <button class="menu-button" id="help-btn">Controls (H)</button>

        <!-- Class Selection -->
        <div id="class-select">
            <h2>Choose Your Class</h2>
            <div class="class-options">
                <!-- Warrior -->
                <div class="class-card" data-class="warrior">
                    <h3>Warrior</h3>
                    <p>Master of melee combat with high strength and vitality.</p>
                    <div class="stats">
                        STR: 30 | DEX: 20<br>
                        VIT: 25 | MAG: 10<br>
                        HP: 100 | MP: 20
                    </div>
                </div>

                <!-- Rogue -->
                <div class="class-card" data-class="rogue">
                    <h3>Rogue</h3>
                    <p>Swift and deadly, excels with bows and daggers.</p>
                    <div class="stats">
                        STR: 20 | DEX: 30<br>
                        VIT: 20 | MAG: 15<br>
                        HP: 80 | MP: 30
                    </div>
                </div>

                <!-- Sorcerer -->
                <div class="class-card" data-class="sorcerer">
                    <h3>Sorcerer</h3>
                    <p>Wielder of arcane magic with devastating spells.</p>
                    <div class="stats">
                        STR: 15 | DEX: 20<br>
                        VIT: 15 | MAG: 35<br>
                        HP: 60 | MP: 80
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modals (outside game-container for proper fixed positioning) -->
<!-- Settings Modal -->
<div id="settings-modal" class="modal hidden">
    <div class="modal-content settings-content">
        <h2>Settings</h2>
        <div class="settings-section">
            <h3>Audio</h3>
            <div class="setting-row">
                <label>Master Volume</label>
                <input type="range" id="master-volume" min="0" max="100" value="80">
                <span id="master-volume-value">80%</span>
            </div>
            <div class="setting-row">
                <label>Music Volume</label>
                <input type="range" id="music-volume" min="0" max="100" value="50">
                <span id="music-volume-value">50%</span>
            </div>
            <div class="setting-row">
                <label>SFX Volume</label>
                <input type="range" id="sfx-volume" min="0" max="100" value="70">
                <span id="sfx-volume-value">70%</span>
            </div>
        </div>
        <div class="settings-section">
            <h3>Display</h3>
            <div class="setting-row">
                <label>Screen Shake</label>
                <input type="checkbox" id="screen-shake" checked>
            </div>
            <div class="setting-row">
                <label>Damage Numbers</label>
                <input type="checkbox" id="damage-numbers" checked>
            </div>
            <div class="setting-row">
                <label>Weather Effects</label>
                <input type="checkbox" id="weather-effects" checked>
            </div>
            <div class="setting-row">
                <label>Show Minimap</label>
                <input type="checkbox" id="show-minimap" checked>
            </div>
        </div>
        <div class="settings-section">
            <h3>Gameplay</h3>
            <div class="setting-row">
                <label>Auto-pickup Gold</label>
                <input type="checkbox" id="auto-loot-gold" checked>
            </div>
            <div class="setting-row">
                <label>Auto-save (1 min)</label>
                <input type="checkbox" id="auto-save" checked>
            </div>
        </div>
        <div class="modal-buttons">
            <button class="menu-button" id="settings-save-btn">Save</button>
            <button class="menu-button secondary" id="settings-cancel-btn">Cancel</button>
        </div>
    </div>
</div>

<!-- Help/Controls Modal -->
<div id="help-modal" class="modal hidden">
    <div class="modal-content help-content">
        <h2>Controls</h2>
        <div class="controls-grid">
            <div class="control-section">
                <h3>Movement & Combat</h3>
                <div class="control-row"><span class="key">Left Click</span><span>Move / Attack / Interact</span></div>
                <div class="control-row"><span class="key">Right Click</span><span>Cancel / Use Item</span></div>
                <div class="control-row"><span class="key">Shift</span><span>Dodge Roll</span></div>
                <div class="control-row"><span class="key">1-6</span><span>Use Skills</span></div>
                <div class="control-row"><span class="key">Q</span><span>Health Potion</span></div>
                <div class="control-row"><span class="key">W</span><span>Mana Potion</span></div>
            </div>
            <div class="control-section">
                <h3>Interface</h3>
                <div class="control-row"><span class="key">I / C</span><span>Inventory</span></div>
                <div class="control-row"><span class="key">P</span><span>Talent Tree</span></div>
                <div class="control-row"><span class="key">M</span><span>Full Map</span></div>
                <div class="control-row"><span class="key">T</span><span>Town Portal</span></div>
                <div class="control-row"><span class="key">E</span><span>Interact with NPC</span></div>
                <div class="control-row"><span class="key">ESC</span><span>Close / Pause</span></div>
            </div>
            <div class="control-section">
                <h3>Save / Load</h3>
                <div class="control-row"><span class="key">F5</span><span>Quick Save</span></div>
                <div class="control-row"><span class="key">F9</span><span>Quick Load</span></div>
                <div class="control-row"><span class="key">H</span><span>Show This Help</span></div>
            </div>
        </div>
        <div class="modal-buttons">
            <button class="menu-button" id="help-close-btn">Close</button>
        </div>
    </div>
</div>

<!-- Pause Menu Modal -->
<div id="pause-modal" class="modal hidden">
    <div class="modal-content pause-content">
        <h2>PAUSED</h2>
        <div class="pause-buttons">
            <button class="menu-button" id="pause-resume-btn">Resume</button>
            <button class="menu-button" id="pause-settings-btn">Settings</button>
            <button class="menu-button" id="pause-help-btn">Controls</button>
            <button class="menu-button" id="pause-save-btn">Quick Save</button>
            <button class="menu-button secondary" id="pause-menu-btn">Main Menu</button>
        </div>
    </div>
</div>

<!-- Game Scripts -->
<!-- Config must load first -->
<script src="/game/js/config.js?v=2"></script>

<!-- World (tiles needed by dungeon) -->
<script src="/game/js/world/tiles.js?v=3"></script>

<!-- Skills (must load before entities that use them) -->
<script src="/game/js/skills/skill.js?v=4"></script>
<script src="/game/js/skills/skillDatabase.js?v=3"></script>

<!-- Entities (enemy must load before dungeon spawns them) -->
<script src="/game/js/entities/enemy.js?v=14"></script>
<script src="/game/js/entities/boss.js?v=5"></script>
<script src="/game/js/entities/projectile.js?v=7"></script>

<!-- World (dungeon needs enemy and boss definitions) -->
<script src="/game/js/world/dungeon.js?v=9"></script>
<script src="/game/js/world/town.js?v=5"></script>

<!-- Engine -->
<script src="/game/js/engine/sprites.js?v=3"></script>
<script src="/game/js/engine/renderer.js?v=17"></script>
<script src="/game/js/engine/input.js?v=6"></script>
<script src="/game/js/engine/pathfinding.js?v=2"></script>
<script src="/game/js/engine/audioManager.js?v=1"></script>
<script src="/game/js/engine/sfxManager.js?v=3"></script>

<!-- Items (must load before Inventory and Player) -->
<script src="/game/js/items/item.js?v=3"></script>
<script src="/game/js/items/itemDatabase.js?v=5"></script>
<script src="/game/js/items/droppedItem.js?v=7"></script>

<!-- Effects -->
<script src="/game/js/effects/combatEffects.js?v=6"></script>
<script src="/game/js/effects/weatherSystem.js?v=1"></script>

<!-- UI Systems -->
<script src="/game/js/ui/uiUtils.js?v=1"></script>
<script src="/game/js/ui/tooltip.js?v=2"></script>
<script src="/game/js/ui/inventory.js?v=3"></script>
<script src="/game/js/ui/inventoryUI.js?v=20260123"></script>
<script src="/game/js/ui/skillbar.js?v=6"></script>

<!-- Town UI Systems -->
<script src="/game/js/ui/shopUI.js?v=5"></script>
<script src="/game/js/ui/stashUI.js?v=8"></script>
<script src="/game/js/ui/healerUI.js?v=4"></script>
<script src="/game/js/ui/dialogueUI.js?v=20260123"></script>
<script src="/game/js/ui/minimap.js?v=1"></script>
<script src="/game/js/ui/talentTreeUI.js?v=1"></script>
<script src="/game/js/ui/buffBar.js?v=1"></script>

<!-- Systems (must load before entities that use them) -->
<script src="/game/js/systems/saveManager.js?v=2"></script>
<script src="/game/js/systems/talentTree.js?v=1"></script>
<script src="/game/js/systems/passives.js?v=1"></script>

<!-- Entities (player needs TalentManager) -->
<script src="/game/js/entities/npc.js?v=3"></script>
<script src="/game/js/entities/player.js?v=14"></script>

<!-- Main (loads last) -->
<script src="/game/js/main.js?v=30"></script>
